{"version":3,"file":"static/js/MoviesView.5819bf9f.chunk.js","mappings":"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","sources":["webpack://foo/./src/Components/MoviesList/moviesList.module.css?db83","Components/MoviesList/MoviesList.js","api/helpers.js","api/api.js","webpack://foo/./src/Components/SearchForm/searchForm.module.css?e323","Components/SearchForm/SearchForm.js","views/MoviesView.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"section\":\"moviesList_section__CjbMR\",\"list\":\"moviesList_list__FswJ0\",\"item\":\"moviesList_item__7pkNG\",\"link\":\"moviesList_link__tMBig\"};","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport styles from './moviesList.module.css';\n\nconst MoviesList = ({ movies }) => {\n  return (\n    <section className={styles.section}>\n      <ul className={styles.list}>\n        {movies.map(({ title, id }) => (\n          <li key={id} className={styles.item}>\n            <Link className={styles.link} to={`/movies/${id}`}>\n              {title}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n};\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,\n    }),\n  ),\n};\n\nexport default MoviesList;\n","export const getListData = res => res.data.results.map(({ title, id }) => ({ title, id }));\n","import axios from 'axios';\nimport { getListData } from './helpers';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'aa10d6d4989884e5722b4bd46231faec';\n\nconst _axios = axios.create({ baseURL: BASE_URL });\n\nexport const getTrending = () =>\n  _axios.get(`/trending/movie/week?api_key=${API_KEY}&limit=20`).then(getListData);\n\nexport const getMoviesByQuery = query =>\n  _axios.get(`/search/movie?api_key=${API_KEY}&limit=20&query=${query}`).then(getListData);\n\nexport const getMovieDetails = id =>\n  _axios\n    .get(`/movie/${id}?api_key=${API_KEY}`)\n    .then(res => res.data)\n    .then(({ title, poster_path, vote_average, overview, genres }) => ({\n      title,\n      poster_path,\n      vote_average,\n      overview,\n      genres,\n    }));\n\nexport const getCastInfo = id =>\n  _axios.get(`/movie/${id}/credits?api_key=${API_KEY}`).then(res =>\n    res.data.cast.map(({ id, profile_path, original_name, character }) => ({\n      id,\n      profile_path,\n      original_name,\n      character,\n    })),\n  );\n\nexport const getReviewsInfo = id =>\n  _axios\n    .get(`movie/${id}/reviews?api_key=${API_KEY}`)\n    .then(res => res.data.results.map(({ id, author, content }) => ({ id, author, content })));\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"searchForm_form__g2fKy\",\"input\":\"searchForm_input__K3D-r\",\"button\":\"searchForm_button__jyg2V\"};","import React, { useState } from 'react';\nimport { PropTypes } from 'prop-types';\nimport styles from './searchForm.module.css';\nimport { Notify } from 'notiflix';\n\nconst SearchForm = ({ onSubmit }) => {\n  const [query, setQuery] = useState('');\n\n  const onChange = ({ target }) => setQuery(target.value);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!query) {\n      Notify.failure('Empty query');\n      return;\n    }\n    onSubmit(query);\n    setQuery('');\n  };\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit}>\n      <input className={styles.input} type=\"text\" value={query} onChange={onChange} />\n      <button className={styles.button} type=\"submit\">\n        Search\n      </button>\n    </form>\n  );\n};\n\nSearchForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default SearchForm;","import { Notify } from 'notiflix';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { getMoviesByQuery } from '../api/api';\nimport SearchForm from '../Components/SearchForm';\nimport MoviesList from '../Components/MoviesList/MoviesList';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport qs from 'qs';\nimport { QueryContext } from '../Components/App';\n\nconst MoviesView = () => {\n  const [movies, setMovies] = useState([]);\n\n  const { query, setQuery } = useContext(QueryContext);\n  const { search, pathname } = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (search.includes('query')) {\n      setQuery(qs.parse(search.replace('?', '')).query);\n      return;\n    }\n    setQuery('');\n  }, [search]);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    !query && setMovies([]);\n\n    if (query) {\n      navigate(`${pathname}?query=${query}`);\n      getMoviesByQuery(query)\n        .then(data => !cancelled && setMovies(data))\n        .catch(() => Notify.failure('Something went wrong!'));\n    }\n    return () => {\n      cancelled = true;\n    };\n  }, [query]);\n\n  const onSubmit = query => setQuery(query);\n\n  return (\n    <>\n      <SearchForm onSubmit={onSubmit} />\n      <MoviesList movies={movies} />\n    </>\n  );\n};\n\nexport default MoviesView;"],"names":["movies","className","styles","map","title","id","to","getListData","res","data","results","API_KEY","_axios","axios","baseURL","getTrending","get","then","getMoviesByQuery","query","getMovieDetails","poster_path","vote_average","overview","genres","getCastInfo","cast","profile_path","original_name","character","getReviewsInfo","author","content","onSubmit","useState","setQuery","e","preventDefault","Notify","type","value","onChange","target","setMovies","useContext","QueryContext","useLocation","search","pathname","navigate","useNavigate","useEffect","includes","qs","replace","cancelled","catch","MoviesList"],"sourceRoot":""}